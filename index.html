<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI CARD MASTER PRO - SOMNATH PREMIUM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #020617; font-family: 'Segoe UI', sans-serif; color: #f8fafc; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
        #video-feed { width: 100%; border-radius: 1.5rem; border: 2px solid #3b82f6; transform: scaleX(-1); }
        .playing-card {
            width: 140px; height: 200px; background: white; border-radius: 15px;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 12px; color: black; box-shadow: 0 0 50px rgba(59, 130, 246, 0.5);
            animation: cardShow 0.6s ease-out;
        }
        @keyframes cardShow { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .premium-bg { background: linear-gradient(90deg, #f59e0b, #d97706); }
    </style>
</head>
<body class="flex flex-col items-center p-4 min-h-screen">

    <div class="w-full max-w-md flex justify-between items-center mb-6 px-2">
        <div>
            <h1 class="text-2xl font-black text-blue-500 tracking-tighter">AI MASTER <span class="text-white">PRO</span></h1>
            <p class="text-[9px] text-yellow-500 font-bold uppercase tracking-[2px]">Premium Stealth System</p>
        </div>
        <div id="premium-status" class="text-right bg-yellow-500/10 p-2 px-3 rounded-xl border border-yellow-500/30">
            <p class="text-[9px] text-yellow-500 font-bold uppercase">Membership Ends In</p>
            <p id="expiry-timer" class="text-white font-mono font-bold text-sm tracking-widest">-- : -- : --</p>
        </div>
    </div>

    <div class="w-full max-w-md relative mb-6">
        <video id="video-feed" autoplay playsinline class="bg-slate-950"></video>
        <div class="absolute top-4 left-4 flex items-center gap-2 bg-black/60 px-3 py-1 rounded-full">
            <div class="w-2 h-2 bg-red-600 rounded-full animate-ping"></div>
            <span class="text-[10px] font-black text-white uppercase tracking-tighter">Live Game Analysis</span>
        </div>
    </div>

    <div class="w-full max-w-md grid grid-cols-2 gap-3 mb-4">
        <label class="cursor-pointer">
            <input type="radio" name="intent" value="win" checked class="hidden peer">
            <div class="peer-checked:bg-blue-600 border border-slate-800 p-3 rounded-2xl text-center bg-slate-900/50">
                <p class="text-xs font-black">WIN MODE</p>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="checkbox" id="human-behavior" class="hidden peer">
            <div class="peer-checked:bg-orange-600 border border-slate-800 p-3 rounded-2xl text-center bg-slate-900/50">
                <p class="text-xs font-black">HUMAN LOGIC (ON)</p>
            </div>
        </label>
    </div>

    <div class="w-full max-w-md flex flex-col gap-3 px-2 mb-6">
        <button id="analyze-btn" onclick="processCard()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-black py-5 rounded-[2rem] shadow-2xl transition-all">
            AI ‡¶è‡¶®‡¶æ‡¶≤‡¶æ‡¶á‡¶∏‡¶ø‡¶∏ (ANALYZE)
        </button>
        <button onclick="showFinalResult()" class="w-full bg-slate-800 text-yellow-500 font-bold py-4 rounded-2xl border border-yellow-500/30">
            üèÅ ‡¶ó‡ßá‡¶Æ ‡¶´‡¶ø‡¶®‡¶ø‡¶∂ (REPORT)
        </button>
    </div>

    <div id="ai-status" class="text-center text-[11px] text-slate-500 font-medium mb-6 italic">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∞‡ßá‡¶°‡¶ø...</div>

    <div id="result-container" class="hidden flex flex-col items-center gap-6 w-full mb-10">
        <div id="digital-card" class="playing-card">
            <div class="flex flex-col items-start leading-none">
                <span id="card-r-top" class="text-4xl font-bold"></span>
                <span id="card-s-top" class="text-3xl"></span>
            </div>
            <div id="card-s-mid" class="text-8xl self-center"></div>
            <div class="flex flex-col items-end leading-none rotate-180">
                <span id="card-r-bot" class="text-4xl font-bold"></span>
                <span id="card-s-bot" class="text-3xl"></span>
            </div>
        </div>
        
        <div class="w-full max-w-[340px] space-y-3">
            <div class="bg-blue-900/20 p-4 rounded-3xl border border-blue-500/20">
                <p class="text-blue-400 text-[10px] font-black uppercase mb-1">‡¶è‡¶Ü‡¶á ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡¶§ ‡¶ö‡¶æ‡¶≤</p>
                <p id="res-logic" class="text-sm text-slate-100 font-medium italic"></p>
            </div>
            <div class="bg-red-900/20 p-4 rounded-3xl border border-red-500/20">
                <p class="text-red-400 text-[10px] font-black uppercase mb-1">‡¶¨‡¶ø‡¶™‡¶ï‡ßç‡¶∑‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡¶∂‡¶®</p>
                <p id="enemy-logic" class="text-sm text-slate-100 font-medium italic">‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            </div>
        </div>
    </div>

    <div id="premium-page" class="hidden fixed inset-0 bg-black/95 z-[60] flex items-center justify-center p-6">
        <div class="glass w-full max-w-sm p-8 rounded-[3rem] border-2 border-yellow-500/30 text-center">
            <h2 class="text-3xl font-black text-yellow-500 mb-6 uppercase italic">PREMIUM SUBSCRIPTION</h2>
            <div class="space-y-4 mb-8">
                <div class="bg-slate-900 p-4 rounded-2xl border border-white/5 flex justify-between items-center">
                    <span class="text-sm font-bold text-white">‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï</span>
                    <span class="text-yellow-500 font-black">‡ß≥ ‡ß®‡ß©‡ßØ</span>
                </div>
                <div class="bg-slate-900 p-4 rounded-2xl border border-yellow-500/30 flex justify-between items-center scale-105">
                    <span class="text-sm font-bold text-white">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï (Best)</span>
                    <span class="text-yellow-500 font-black">‡ß≥ ‡ß™‡ßØ‡ßØ</span>
                </div>
                <div class="bg-slate-900 p-4 rounded-2xl border border-white/5 flex justify-between items-center">
                    <span class="text-sm font-bold text-white">‡ß© ‡¶Æ‡¶æ‡¶∏ (Super)</span>
                    <span class="text-yellow-500 font-black">‡ß≥ ‡ßß‡ß™‡ß©‡ßØ</span>
                </div>
            </div>
            <p id="premium-error" class="text-red-500 text-xs font-bold mb-4">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶Æ‡ßá‡ßü‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑!</p>
            <button class="w-full bg-yellow-500 py-4 rounded-2xl font-black text-black shadow-xl uppercase">Renew Now</button>
        </div>
    </div>

    <script>
        const API_KEY = "AIzaSyCFpatnKI1WV76ZL6i0nNO7Ac3VigCIDFI";
        let currentGameHistory = [];
        let isPremiumActive = true; 
        let timeLeft = 604800; // ‡ß≠ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°

        // ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function startExpiryTimer() {
            const timerDisplay = document.getElementById('expiry-timer');
            const interval = setInterval(() => {
                if(timeLeft <= 0) {
                    clearInterval(interval);
                    document.getElementById('premium-page').classList.remove('hidden');
                    return;
                }
                timeLeft--;
                let d = Math.floor(timeLeft / (3600*24));
                let h = Math.floor(timeLeft % (3600*24) / 3600);
                let m = Math.floor(timeLeft % 3600 / 60);
                let s = Math.floor(timeLeft % 60);
                timerDisplay.innerText = `${d}d ${h}h ${m}m ${s}s`;
            }, 1000);
        }
        startExpiryTimer();

        async function initCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                document.getElementById('video-feed').srcObject = stream;
            } catch (e) { alert("Camera Error"); }
        }
        initCamera();

        async function processCard() {
            if(!isPremiumActive) return;
            
            const status = document.getElementById('ai-status');
            const resContainer = document.getElementById('result-container');
            const humanMode = document.getElementById('human-behavior').checked;
            
            status.innerHTML = `<span class="animate-pulse text-blue-400">AI ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡¶õ‡ßá...</span>`;

            const canvas = document.createElement('canvas');
            canvas.width = 640; canvas.height = 480;
            canvas.getContext('2d').drawImage(document.getElementById('video-feed'), 0, 0, 640, 480);
            const base64 = canvas.toDataURL('image/jpeg', 0.5).split(',')[1];

            // ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü‡¶ü‡¶ø ‡¶è‡¶ñ‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ‡¶ø‡¶Ç ‡¶¨‡¶ø‡¶¨‡ßá‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡¶¨‡ßá
            const prompt = `History of played cards: ${JSON.stringify(currentGameHistory)}. 
            Human Behavior Mode: ${humanMode}. 
            Identify visible cards and predict enemy cards based on history.
            Return JSON: {"r":"Rank", "s":"SuitSymbol", "l":"My Strategy", "e":"Enemy Cards Prediction"}`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }, { inline_data: { mime_type: "image/jpeg", data: base64 } }] }] })
                });

                const data = await response.json();
                const result = JSON.parse(data.candidates[0].content.parts[0].text.match(/\{.*\}/s)[0]);

                currentGameHistory.push(result);

                document.getElementById('card-r-top').innerText = result.r;
                document.getElementById('card-s-mid').innerText = result.s;
                document.getElementById('res-logic').innerText = result.l;
                document.getElementById('enemy-logic').innerText = result.e;

                resContainer.classList.remove('hidden');
                status.innerText = "‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶∏‡¶´‡¶≤!";
            } catch (error) { status.innerText = "‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"; }
        }
    </script>
</body>
</html>
